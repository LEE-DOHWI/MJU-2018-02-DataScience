```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(dplyr)
```

# ggplot (gg = grammar of graphics)

## ggplot2 book contents

3. **toolbox**
4. grammar
5. **layer by layer**
6. **scales, axes and legends**
7. positioning : zooming in/out, ...

### 3 key components of every plot
1. Data
2. Aesthetic mapping(with scale)
3. Geoms

We will use `mpg` from package `ggplot2`.[^1]

[^1]: engine displacement=배기량, 
 
Example of basic scatter plots
```{r, eval=F}
ggplot(data, aes(x=  , y=   )) + geom_point()
```

Example of basic scatter plots with more aestheics mappings
```{r, eval=F}
ggplot(data, aes(x=  , y=   , col=  , size=  , shape=   )) + geom_point()
```

Example of basic scatter plot, more geoms
```{r, eval=F}
ggplot(data, aes(x=  , y=   , col=  , size=  , shape=   )) + 
  geom_point() + 
  geom_line()  
```

```{r, eval=F}
ggplot(data, aes(x=  , y=   , col=  , size=  , shape=   )) + 
  geom_point() + 
  geom_line() +
  geom_smooth(method='lm/glm/gam/loess/MASS::rlm', span=  , formula=  )
```

### When x is categorical,
points can be overwritten, so we jitter or convert points to a box or a violin
```{r, eval=F}
ggplot(data, aes(x=  , y=  )) + geom_jitter()
ggplot(data, aes(x=  , y=  , col=  , fill=  )) + geom_boxplot()
ggplot(data, aes(x=  , y=  , col=  , fill=  )) + geom_violin()
```

If y is categorical and x is continuous, you can just flip the plot
```{r, eval=F}
ggplot(data, aes(x=  , y=  )) + coord_flip()
```

### Distribution of a continuous variable: **histograms** and **frequency polygons**
```{r, eval=F}
ggplot(data, aes(x=  )) + geom_historgram(bins=  , binwidth=  , breaks=  )
ggplot(data, aes(x=  )) + geom_freqpoly(bins=  , binwidth=  , breaks=  )  
```

### Distrbution of a categorical variable: **bar chart**
```{r, eval=F}
ggplot(data, aes(x=  )) + geom_bar(col=  , fill= )
```

Examples
```{r, error=T}
ggplot(mpg, aes(x=manufacturer)) + geom_bar()
ggplot(mpg, aes(x=manufacturer)) + geom_bar(aes(col=model))
ggplot(mpg, aes(x=manufacturer)) + geom_bar(aes(fill=model))
```

Another bar chart
```{r}
data(mpg, package='ggplot2')
dat <- table(mpg$manufacturer)
df <- as.data.frame(dat)
colnames(df) = c('name', 'n')
ggplot(df, aes(x=name, y=n)) + geom_bar(stat='identity')
```

```{r}
dat <- mpg %>% 
  group_by(year, manufacturer) %>% 
  summarise(num=length(manufacturer)) # or n()
ggplot(dat, aes(x=year, y=num, col=manufacturer)) + geom_point() + geom_line()
```

### How to specify Aesthetics

```{r}
vignette('ggplot2-specs')
```



